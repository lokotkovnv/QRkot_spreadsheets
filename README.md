# QRkot

Приложение для Благотворительного фонда поддержки котиков. Фонд собирает пожертвования на различные целевые проекты: на медицинское обслуживание нуждающихся хвостатых, на обустройство кошачьей колонии в подвале, на корм оставшимся без попечения кошкам — на любые цели, связанные с поддержкой кошачьей популяции.

## Описание проекта

### Проекты
В Фонде QRKot может быть открыто несколько целевых проектов. У каждого проекта есть название, описание и сумма, которую планируется собрать. После того, как нужная сумма собрана — проект закрывается.
Пожертвования в проекты поступают по принципу First In, First Out: все пожертвования идут в проект, открытый раньше других; когда этот проект набирает необходимую сумму и закрывается — пожертвования начинают поступать в следующий проект.
### Пожертвования
Каждый пользователь может сделать пожертвование и сопроводить его комментарием. Пожертвования не целевые: они вносятся в фонд, а не в конкретный проект. Каждое полученное пожертвование автоматически добавляется в первый открытый проект, который ещё не набрал нужную сумму. Если пожертвование больше нужной суммы или же в Фонде нет открытых проектов — оставшиеся деньги ждут открытия следующего проекта. При создании нового проекта все неинвестированные пожертвования автоматически вкладываются в новый проект.
### Пользователи
Целевые проекты создаются администраторами сайта. 
Любой пользователь может видеть список всех проектов, включая требуемые и уже внесенные суммы. Это касается всех проектов — и открытых, и закрытых.
Зарегистрированные пользователи могут отправлять пожертвования и просматривать список своих пожертвований.
### Google sheets
К проекту подключена возможность формирования отчёта в гугл-таблице. В таблице отображаются закрытые проекты, отсортированные по скорости сбора средств: от тех, что закрылись быстрее всего, до тех, что долго собирали нужную сумму.

## Установка

1. **Клонируйте репозиторий:**

   git clone git@github.com:lokotkovnv/cat_charity_fund.git

2. **Перейдите в каталог проекта:**

   cd cat_charity_fund

3. **Создайте и активируйте виртуальное окружение:**
   Для Unix/Linux/MacOS:

   python3 -m venv venv

   source venv/bin/activate

   Для Windows:

   python -m venv venv

   source venv\Scripts\activate

4. **Установите зависимости:**

   pip install -r requirements.txt

5. **Примените миграции:**

   alembic upgrade head

6. **Запустите проект:**

   uvicorn app.main:app

После запуска проект будет доступен по адресу: http://127.0.0.1:8000

Документация к API досупна по адресам:

Swagger: http://127.0.0.1:8000/docs
Redoc: http://127.0.0.1:8000/redoc

## Примеры запросов

GET http://127.0.0.1:8000/charity_project/ - Получить список всех проектов

POST http://127.0.0.1:8000/donation/
{
  "comment": "string",
  "full_amount": 0
} - Отправить пожертвование

GET http://127.0.0.1:8000/donation/my/ - Посмотреть список своих пожертвований

POST http://127.0.0.1:8000/google/ - Создать отчет в таблице на google disk(Требуется добавить данные авторизации сервисного аккаунта и аккаунта google в файл .env в корневой дирректории)

## Использованые технологии

1. Python
2. FastApi
3. Uvicorn
4. Sqlalchemy
5. Alembic
6. Google sheets api
7. Google drive api

## Автор

Локотков Никита (https://github.com/lokotkovnv)
